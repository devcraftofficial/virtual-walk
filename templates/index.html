<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ABTO - A Better Travel Observer</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="ABTO - A Better Travel Observer. Explore real streets worldwide with immersive walk, drive, and fly modes.">

<!-- Fonts & Icons -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
/* ================= ROOT THEME ================= */
:root {
  --bg-main:#0a0b15;
  --bg-soft:#0f1223;
  --glass:rgba(255,255,255,.04);
  --glass-hover:rgba(255,255,255,.08);
  --accent:#5d5eff;
  --accent2:#7c3aed;
  --accent3:#ec4899;
  --gradient:linear-gradient(135deg,#5d5eff,#7c3aed,#a855f7);
  --gradient-glow:linear-gradient(135deg,#5d5eff22,#7c3aed22,#a855f722);
  --text:#f8fafc;
  --text-muted:#94a3b8;
  --text-dim:#64748b;
  --border:rgba(255,255,255,.08);
  --border-accent:rgba(93,94,255,.2);
  --radius-xl:24px;
  --radius-lg:18px;
  --radius:12px;
  --shadow:0 25px 50px rgba(0,0,0,.45);
  --shadow-glow:0 0 0 1px rgba(93,94,255,.2), 0 25px 50px rgba(0,0,0,.45);
  --nav-h:86px;
  --hero-badge-top:120px;
  --ease:all .35s cubic-bezier(.4,0,.2,1);
  --ease-fast:all .2s cubic-bezier(.4,0,.2,1);
}

/* ================= BASE ================= */
*, *::before, *::after {box-sizing:border-box}
html {scroll-behavior:smooth}
body {
  font-family:'Inter',system-ui,sans-serif;
  background: 
    radial-gradient(circle at 20% 20%,rgba(93,94,255,.12),transparent 50%),
    radial-gradient(circle at 80% 80%,rgba(124,58,237,.1),transparent 50%),
    linear-gradient(135deg,#0a0b15,#0f1223);
  color:var(--text);
  line-height:1.6;
  padding-top:var(--nav-h);
  overflow-x:hidden;
  position:relative;
}

/* ================= ANIMATIONS ================= */
@keyframes fadeInUp {
  from {opacity:0; transform:translateY(30px)}
  to {opacity:1; transform:translateY(0)}
}
@keyframes float {
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-8px)}
}
@keyframes pulse-glow {
  0%,100%{box-shadow:var(--shadow)}
  50%{box-shadow:var(--shadow-glow)}
}
.fade-in-up {animation:fadeInUp .8s ease forwards}

/* ================= NAV ================= */
nav {
  position:fixed;
  top:0;left:0;right:0;
  height:var(--nav-h);
  display:flex;align-items:center;justify-content:space-between;
  padding:0 max(16px, 5vw);
  backdrop-filter:blur(22px);
  background:rgba(10,11,21,.95);
  border-bottom:1px solid var(--border);
  z-index:999;
  transition:var(--ease);
}
nav.scrolled {
  background:rgba(10,11,21,.98);
  box-shadow:0 10px 40px rgba(0,0,0,.5);
}
.logo {
  font-size:clamp(20px, 5vw, 28px);
  font-weight:900;
  background:var(--gradient);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  text-decoration:none;
  letter-spacing:-.03em;
  position:relative;
}
.logo:hover {
  transform:scale(1.05);
}
.logo::after {
  content:'A Better Travel Observer';
  position:absolute;
  bottom:-24px;
  left:50%;
  transform:translateX(-50%);
  font-size:10px;
  color:var(--text-muted);
  font-weight:400;
  white-space:nowrap;
  opacity:0;
  transition:var(--ease);
  pointer-events:none;
}
.logo:hover::after {
  opacity:1;
  bottom:-28px;
}
.nav-links {display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.nav-link {
  text-decoration:none;
  color:var(--text);
  padding:10px 20px;
  border-radius:999px;
  font-weight:600;
  border:1px solid transparent;
  font-size:clamp(14px, 2.5vw, 15px);
  transition:var(--ease);
  position:relative;
  overflow:hidden;
  white-space:nowrap;
  min-width:fit-content;
}
.nav-link::before {
  content:'';
  position:absolute;
  top:0;left:-100%;
  width:100%;height:100%;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,.1),transparent);
  transition:var(--ease-fast);
}
.nav-link:hover::before {left:100%}
.nav-link:hover {
  background:var(--glass-hover);
  border-color:var(--border);
  transform:translateY(-2px);
}
.nav-link.primary {
  background:var(--gradient);
  box-shadow:0 15px 40px rgba(93,94,255,.45);
  color:#fff !important;
}
.nav-link.primary:hover {
  transform:translateY(-3px) scale(1.02);
  box-shadow:0 20px 50px rgba(93,94,255,.6);
}
.mobile-menu-toggle {
  display:none;
  flex-direction:column;
  gap:5px;
  cursor:pointer;
  padding:8px;
}
.hamburger {
  width:24px;height:2px;
  background:var(--text);
  transition:var(--ease-fast);
  border-radius:2px;
}

/* ================= HERO ================= */
.hero {
  min-height:calc(100vh - var(--nav-h));
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  text-align:center;
  padding: var(--hero-badge-top) max(16px, 6vw) 60px;
  position:relative;
}
.hero::before {
  content:'';
  position:absolute;
  top:0;left:0;right:0;bottom:0;
  background:radial-gradient(circle at 50% 20%,rgba(93,94,255,.08),transparent 50%);
  pointer-events:none;
}
.hero-badge {
  display:inline-flex;
  gap:10px;
  align-items:center;
  padding:12px 24px;
  background:var(--glass);
  border:1px solid var(--border);
  border-radius:999px;
  backdrop-filter:blur(10px);
  animation:float 6s ease-in-out infinite;
  position:relative;
  z-index:10;
  margin-bottom:40px;
}
.hero-badge i {color:var(--accent);font-size:18px}
.hero h1 {
  font-size:clamp(36px, 10vw, 72px);
  font-weight:800;
  line-height:1.1;
  background:linear-gradient(135deg,#fff 0%,var(--accent) 50%,#ec4899 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  margin:0 0 24px;
  letter-spacing:-.02em;
  max-width:90%;
}
.hero h1::after {
  content:'ABTO';
  display:block;
  font-size:clamp(18px, 4vw, 24px);
  font-weight:700;
  color:var(--accent);
  margin-top:8px;
  opacity:.8;
}
.hero p {
  max-width:100%;
  font-size:clamp(16px, 3vw, 18px);
  color:#e5e7eb;
  margin:0 0 36px;
  font-weight:400;
  padding:0 10px;
}
.hero p::before {
  content:'A Better Travel Observer brings you ';
  font-weight:600;
  color:var(--accent);
}
.hero-cta {
  display:inline-flex;
  gap:10px;
  align-items:center;
  padding:16px 36px;
  background:var(--gradient);
  color:#fff;
  text-decoration:none;
  font-weight:700;
  border-radius:999px;
  box-shadow:0 22px 50px rgba(93,94,255,.5);
  transition:var(--ease);
  font-size:clamp(15px, 3vw, 16px);
  position:relative;
  overflow:hidden;
}
.hero-cta::before {
  content:'';
  position:absolute;
  top:0;left:-100%;
  width:100%;height:100%;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);
  transition:var(--ease-fast);
}
.hero-cta:hover::before {left:100%}
.hero-cta:hover {
  transform:translateY(-4px) scale(1.02);
  box-shadow:0 30px 60px rgba(93,94,255,.6);
}

/* ================= MODES ================= */
.modes {
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));
  gap:24px;
  max-width:1200px;
  margin:60px auto 0;
  padding:0 16px;
}
.mode-card {
  background:var(--glass);
  border:1px solid var(--border);
  border-radius:var(--radius-xl);
  padding:clamp(32px, 8vw, 42px) clamp(24px, 5vw, 30px);
  text-align:center;
  transition:var(--ease);
  text-decoration:none;
  color:inherit;
  backdrop-filter:blur(12px);
  position:relative;
  overflow:hidden;
}
.mode-card::before {
  content:'ABTO';
  position:absolute;
  top:12px;right:12px;
  font-size:11px;
  color:var(--accent);
  font-weight:700;
  background:var(--glass);
  padding:4px 8px;
  border-radius:12px;
  border:1px solid var(--border-accent);
  opacity:.9;
  transition:var(--ease);
}
.mode-card::after {
  content:'';
  position:absolute;
  top:0;left:0;right:0;height:4px;
  background:var(--gradient);
  transform:scaleX(0);
  transition:var(--ease);
}
.mode-card:hover::after {transform:scaleX(1)}
.mode-card:hover {
  transform:translateY(-12px);
  box-shadow:var(--shadow-glow);
  border-color:var(--accent);
}
.mode-icon {
  font-size:clamp(44px, 12vw, 52px);
  margin-bottom:16px;
  display:block;
  filter:drop-shadow(0 8px 20px rgba(93,94,255,.3));
  animation:float 4s ease-in-out infinite;
  position:relative;
}
.mode-card h3 {
  margin:0 0 12px;
  font-size:clamp(20px, 4vw, 24px);
  font-weight:700;
}
.mode-card h3::after {
  content:' - ABTO';
  font-size:.65em;
  opacity:.8;
}
.mode-card p {
  margin:0;
  color:var(--text-muted);
  font-weight:400;
  font-size:clamp(14px, 2.5vw, 16px);
}

/* ================= SECTIONS ================= */
.section {
  padding:clamp(80px, 15vw, 140px) max(16px, 6vw);
  max-width:1600px;
  margin:auto;
}
.section h2 {
  text-align:center;
  font-size:clamp(32px, 7vw, 46px);
  font-weight:800;
  margin-bottom:14px;
  background:var(--gradient);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.section h2::after {
  content:'ABTO';
  display:block;
  font-size:clamp(16px, 3vw, 20px);
  font-weight:700;
  color:var(--accent);
  opacity:.9;
}
.section p {
  text-align:center;
  color:var(--text-muted);
  font-size:clamp(16px, 2.5vw, 18px);
  margin-bottom:60px;
  max-width:800px;
  margin-left:auto;
  margin-right:auto;
}
.grid {
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(260px, 1fr));
  gap:clamp(20px, 4vw, 28px);
}
.card {
  background:var(--glass);
  border:1px solid var(--border);
  border-radius:var(--radius-xl);
  overflow:hidden;
  transition:var(--ease);
  text-decoration:none;
  color:inherit;
  backdrop-filter:blur(12px);
  position:relative;
  min-height:320px;
  display:flex;
  flex-direction:column;
}
.card::before {
  content:'ABTO';
  position:absolute;
  top:12px;right:12px;
  font-size:10px;
  color:#fff;
  font-weight:700;
  background:var(--accent);
  padding:4px 8px;
  border-radius:12px;
  opacity:0;
  transition:var(--ease);
}
.card:hover::before {opacity:1}
.card::after {
  content:'';
  position:absolute;
  inset:0;
  background:var(--gradient-glow);
  opacity:0;
  transition:var(--ease);
}
.card:hover::after {opacity:1}
.card:hover {
  transform:translateY(-10px);
  box-shadow:var(--shadow-glow);
}
.thumb {
  height:clamp(160px, 25vw, 200px);
  background-size:cover;
  background-position:center;
  position:relative;
  overflow:hidden;
  flex-shrink:0;
}
.thumb::after {
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(45deg,#5d5eff33,#7c3aed22);
  opacity:0;
  transition:var(--ease);
}
.card:hover .thumb::after {opacity:1}
.thumb-placeholder {
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(135deg, var(--glass), var(--bg-soft));
  color:var(--text-muted);
  font-size:clamp(48px, 12vw, 64px);
}
.card-body {
  padding:20px;
  flex-grow:1;
  display:flex;
  flex-direction:column;
}
.card-body h4 {
  margin:0 0 8px;
  font-size:clamp(16px, 3vw, 20px);
  font-weight:700;
  line-height:1.3;
  flex-grow:1;
}
.card-body span {
  color:var(--text-muted);
  font-size:clamp(13px, 2vw, 14px);
  font-weight:500;
  margin-top:auto;
}

/* ================= LOADING & EMPTY STATES ================= */
.loading {
  display:flex;align-items:center;justify-content:center;
  padding:80px 20px;
  color:var(--text-muted);
  font-size:clamp(16px, 3vw, 18px);
}
.loading::before {
  content:'ABTO';
  color:var(--accent);
  font-weight:700;
  font-size:20px;
  margin-right:12px;
}
.loading i {
  font-size:32px;
  animation:spin 1s linear infinite;
  margin-right:16px;
}
@keyframes spin {
  from {transform:rotate(0deg)}
  to {transform:rotate(360deg)}
}
.empty-state {
  text-align:center;
  padding:clamp(80px, 20vw, 120px) 40px;
  color:var(--text-muted);
}
.empty-state h3::before {
  content:'ABTO';
  display:block;
  font-size:clamp(24px, 8vw, 32px);
  font-weight:800;
  background:var(--gradient);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  margin-bottom:16px;
}
.empty-state i {
  font-size:clamp(48px, 15vw, 64px);
  margin-bottom:24px;
  opacity:.6;
}

/* ================= MOBILE RESPONSIVE ================= */
@media(max-width:1024px) {
  :root {
    --hero-badge-top:100px;
  }
  .nav-links {gap:8px}
}

@media(max-width:768px) {
  :root {
    --nav-h:70px;
    --hero-badge-top:90px;
  }
  nav {
    padding:12px 16px;
    height:var(--nav-h);
  }
  body {padding-top:var(--nav-h)}
  .logo {font-size:clamp(18px, 6vw, 24px)}
  .logo::after {font-size:9px; bottom:-20px;}
  
  .nav-links {
    display:none;
    position:fixed;
    top:var(--nav-h);
    left:0;right:0;
    background:rgba(10,11,21,.98);
    flex-direction:column;
    padding:32px 20px;
    backdrop-filter:blur(22px);
    border-top:1px solid var(--border);
    gap:16px;
    animation:slideDown 0.3s ease;
  }
  @keyframes slideDown {
    from {transform: translateY(-100%); opacity: 0;}
    to {transform: translateY(0); opacity: 1;}
  }
  .nav-links.active {display:flex}
  .mobile-menu-toggle {display:flex}
  
  .hero {
    padding: var(--hero-badge-top) 20px 40px;
    justify-content:flex-start;
    gap:20px;
  }
  .hero-badge {
    margin-bottom:20px;
    animation-duration:4s;
  }
  .hero h1 {
    margin-bottom:16px;
    line-height:1.05;
  }
  .hero h1::after {font-size:clamp(16px, 5vw, 20px);}
  .hero p {padding:0 8px}
  
  .section {padding:60px 20px}
  .grid {grid-template-columns:1fr; gap:24px}
  .modes {
    margin-top:40px;
    gap:20px;
    padding:0 12px;
    grid-template-columns:1fr;
  }
}

@media(max-width:480px) {
  :root {
    --nav-h:65px;
    --hero-badge-top:80px;
  }
  nav {padding:10px 14px}
  .nav-link {padding:12px 18px; font-size:14px}
  .hero-cta {flex-direction:row; gap:8px; padding:14px 28px}
  .mode-card {padding:28px 20px}
  .card-body {padding:16px}
  .hero {
    padding-top:var(--hero-badge-top);
    padding-bottom:30px;
  }
}

/* ================= HAMBURGER ANIMATION ================= */
.mobile-menu-toggle.open .hamburger:nth-child(1) {
  transform: rotate(45deg) translate(6px, 6px);
}
.mobile-menu-toggle.open .hamburger:nth-child(2) {
  opacity: 0;
}
.mobile-menu-toggle.open .hamburger:nth-child(3) {
  transform: rotate(-45deg) translate(6px, -6px);
}
</style>
</head>

<body>
<!-- FIXED: Preloader hides after DOM + images load -->
<div class="loading" id="preloader">
  <i class="fas fa-spinner"></i>
  <span>Loading streets...</span>
</div>

<nav id="navbar">
  <a href="{{ url_for('index') }}" class="logo">ABTO</a>
  <div class="nav-links" id="navLinks">
    <a href="{{ url_for('index') }}" class="nav-link">Home</a>
    <a href="{{ url_for('upload') }}" class="nav-link">Upload</a>
    {% if current_user.is_authenticated %}
      <a href="{{ url_for('dashboard') }}" class="nav-link primary">
        <i class="fas fa-tachometer-alt"></i> Dashboard
      </a>
    {% else %}
      <a href="{{ url_for('login') }}" class="nav-link primary">
        <i class="fas fa-rocket"></i> Get Started
      </a>
    {% endif %}
  </div>
  <div class="mobile-menu-toggle" id="mobileToggle">
    <div class="hamburger"></div>
    <div class="hamburger"></div>
    <div class="hamburger"></div>
  </div>
</nav>

<main>
<section class="hero">
  <div class="hero-badge fade-in-up" style="animation-delay:.3s">
    <i class="fas fa-globe-americas"></i>
    <span id="streetCount">{{ streets|length if streets else 0 }}+ Real Streets</span>
  </div>
  <h1 class="fade-in-up" style="animation-delay:.5s">
    Explore Real Streets<br>From Anywhere
  </h1>
  <p class="fade-in-up" style="animation-delay:.7s">
    Walk, drive or fly through real locations around the world. 
    No games. Just reality. Powered by real video footage.
  </p>
  <a href="#streets" class="hero-cta fade-in-up" style="animation-delay:.9s">
    <i class="fas fa-play-circle"></i>
    Start Exploring Now
  </a>

  <div class="modes fade-in-up" style="animation-delay:1.1s">
    <a href="{{ url_for('world_walk') }}" class="mode-card">
      <div class="mode-icon">üö∂‚Äç‚ôÇÔ∏è</div>
      <h3>Walk Mode</h3>
      <p>Human-pace exploration with ambient realism</p>
    </a>
    <a href="{{ url_for('world_drive') }}" class="mode-card">
      <div class="mode-icon">üöó</div>
      <h3>Drive Mode</h3>
      <p>Smooth highway and city driving experience</p>
    </a>
    <a href="{{ url_for('world_fly') }}" class="mode-card">
      <div class="mode-icon">‚úàÔ∏è</div>
      <h3>Fly Mode</h3>
      <p>Aerial drone perspectives of cities</p>
    </a>
  </div>
</section>

<section class="section" id="streets">
  <h2>Featured Streets</h2>
  <p>Handpicked immersive locations from around the world</p>

  {% if streets and streets|length > 0 %}
    <div class="grid" id="streetsGrid">
      {% for st in streets %}
        {% if st.videos and st.videos|length > 0 and st.videos[0].url %}
          {% set thumb_url = st.videos[0].url|replace('video/upload', 'video/upload/so_1,f_jpg,q_auto,w_400,c_fill,g_center') %}
        {% else %}
          {% set thumb_url = '/static/images/placeholder-street.jpg' %}
        {% endif %}
        <a href="{{ url_for('world', street_id=st._id) }}" class="card fade-in-up" style="animation-delay:{{ loop.index0 * 0.08 }}s">
          <div class="thumb" style="background-image:url('{{ thumb_url }}')">
            {% if thumb_url == '/static/images/placeholder-street.jpg' %}
              <div class="thumb-placeholder">
                <i class="fas fa-map-marked-alt"></i>
              </div>
            {% endif %}
          </div>
          <div class="card-body">
            <h4>{{ st.name[:45] }}{% if st.name|length > 45 %}...{% endif %}</h4>
            <span>
              <i class="fas fa-map-marker-alt" style="color:var(--accent);margin-right:6px"></i>
              {{ st.city or 'Unknown' }}, {{ st.country or 'Unknown' }}
            </span>
          </div>
        </a>
      {% endfor %}
    </div>
    {% if streets|length > 12 %}
      <div style="text-align:center; margin-top:40px">
        <a href="{{ url_for('dashboard') }}" class="hero-cta" style="font-size:16px; padding:14px 32px">
          <i class="fas fa-th-large"></i> View All Streets
        </a>
      </div>
    {% endif %}
  {% else %}
    <div class="empty-state">
      <i class="fas fa-map"></i>
      <h3>No streets available yet</h3>
      <p>Be the first to upload and explore real streets around the world.</p>
      <a href="{{ url_for('upload') }}" class="hero-cta" style="margin-top:32px; font-size:16px">
        <i class="fas fa-upload"></i> Upload First Street
      </a>
    </div>
  {% endif %}
</section>
</main>

<!-- Footer -->
<footer style="padding:40px max(16px, 6vw);text-align:center;color:var(--text-muted);border-top:1px solid var(--border);margin-top:60px">
  <p>&copy; 2025 <span style="font-weight:900;background:var(--gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:.5px;font-size:1.2em">ABTO</span><br>
  <small>A Better Travel Observer</small></p>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // ‚úÖ FIXED: Reliable preloader that ALWAYS hides
  const preloader = document.getElementById('preloader');
  
  // Hide after 2 seconds OR when everything loads
  const hidePreloader = () => {
    preloader.style.opacity = '0';
    preloader.style.transform = 'scale(0.9)';
    setTimeout(() => {
      preloader.style.display = 'none';
    }, 300);
  };
  
  // Method 1: Timeout (backup)
  const timeoutId = setTimeout(hidePreloader, 2000);
  
  // Method 2: Check if content loaded (primary)
  const checkContentLoaded = () => {
    const streetsGrid = document.getElementById('streetsGrid');
    const streetCount = document.getElementById('streetCount');
    if (streetsGrid || streetCount) {
      clearTimeout(timeoutId);
      hidePreloader();
    }
  };
  
  // Check immediately and after short delay
  setTimeout(checkContentLoaded, 500);
  setTimeout(checkContentLoaded, 1000);

  // Navbar scroll effect
  const navbar = document.getElementById('navbar');
  window.addEventListener('scroll', () => {
    navbar.classList.toggle('scrolled', window.scrollY > 50);
  });

  // Mobile menu toggle
  const mobileToggle = document.getElementById('mobileToggle');
  const navLinks = document.getElementById('navLinks');
  
  if (mobileToggle && navLinks) {
    mobileToggle.addEventListener('click', () => {
      navLinks.classList.toggle('active');
      mobileToggle.classList.toggle('open');
      document.body.style.overflow = navLinks.classList.contains('active') ? 'hidden' : '';
    });
  }

  // Close mobile menu on link click
  document.querySelectorAll('.nav-link').forEach(link => {
    link.addEventListener('click', () => {
      navLinks.classList.remove('active');
      mobileToggle.classList.remove('open');
      document.body.style.overflow = '';
    });
  });

  // Smooth scroll for hero CTA
  const heroCta = document.querySelector('.hero-cta[href="#streets"]');
  if (heroCta) {
    heroCta.addEventListener('click', (e) => {
      e.preventDefault();
      document.getElementById('streets').scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
      });
    });
  }

  // Street count formatting
  const streetCount = document.getElementById('streetCount');
  if (streetCount) {
    const countMatch = streetCount.textContent.match(/(\d+)/);
    if (countMatch) {
      const count = parseInt(countMatch[1]);
      streetCount.textContent = count.toLocaleString() + '+ Real Streets';
    }
  }

  // Intersection Observer for animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -100px 0px'
  };
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
      }
    });
  }, observerOptions);

  // Observe all animated elements
  document.querySelectorAll('.card, .mode-card, .hero-badge, .hero h1, .hero p, .hero-cta').forEach(el => {
    el.style.opacity = '0';
    el.style.transform = 'translateY(30px)';
    el.style.transition = 'all .6s cubic-bezier(0.4, 0, 0.2, 1)';
    observer.observe(el);
  });

  // Prevent body scroll when mobile menu open
  document.addEventListener('click', (e) => {
    if (!e.target.closest('nav') && navLinks && navLinks.classList.contains('active')) {
      navLinks.classList.remove('active');
      mobileToggle.classList.remove('open');
      document.body.style.overflow = '';
    }
  });
});
</script>

</body>
</html>
